@import forms.FormHelpers._

@(
    name: String,
    labelText: String,
    options: Seq[(String, String)],
    hintText: String = "",
    fieldsetPresentation: Presentation = Defaults.radioGroup,
    containerPresentation: Presentation = Defaults.field,
    legendPresentation: Presentation = Defaults.legend,
    hintPresentation: Presentation = Defaults.hint
)(implicit
    form: Form[_],
    lang: Lang
)

@fieldsetPresentation_ = @{
    // Make groups of 2 radio buttons inline
    if (options.length < 3) {
        fieldsetPresentation.copy(
            classes = "inline" +: fieldsetPresentation.classes
        )
    } else {
        fieldsetPresentation
    }
}

@containerPresentation_ = @{
    if (form(name).hasErrors) {
        containerPresentation.copy(
            classes = "form-field--error" +: containerPresentation.classes
        )
    } else {
        containerPresentation
    }
}

@fieldset(
    legend = labelText,
    containerPresentation = containerPresentation_,
    presentation = fieldsetPresentation_,
    legendPresentation = legendPresentation
) {
    @hint(hintText, id(name), hintPresentation)
    @errorField(name)
    @options.map { case (key, value) =>
        <label class="block-label">
            <input type="radio" name="@name" value="@value"
            @form(name).value.filter( _ == value).map{ _ => checked="checked"} >
            @key
        </label>
    }
}
