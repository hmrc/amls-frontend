@import include._
@import models.businessmatching._
@import config.{ApplicationConfig => appConfig}
@(model: BusinessMatching)(implicit request: Request[_])

@header = {
    @heading("summary.checkyouranswers.title", "summary.businessmatching")
}

@main(
    title = Messages("summary.checkyouranswers.title"),
    heading = header
) {

    <div class="panel-indent panel-indent--gutter panel-wide">
        @Messages("businessmatching.summary.icon.title")
    </div>

    @model.reviewDetails.map { review =>
        <table class="table--spaced-top">
            <tr>
                <th colspan="2">@Messages("businessmatching.summary.business.address.lbl")</th>
            </tr>
            <tr>
                <td colspan="2">
                    @review.businessAddress.toLines.map { line =>
                        @line<br>
                    }
                </td>
            </tr>
        </table>

        @review.businessType.map { m =>
            @m match {
                case BusinessType.LPrLLP | BusinessType.LimitedCompany => {
                    <table class="table--spaced-top">
                        <tr>
                            <th>@Messages("businessmatching.registrationnumber.heading")</th>
                            <td width="12"><a href="@controllers.businessmatching.routes.CompanyRegistrationNumberController.get(true)">@Messages("button.edit")</a></td>
                        </tr>
                        <tr>
                            <td colspan="2">
                                @model.companyRegistrationNumber.map {number =>
                                    @number.companyRegistrationNumber
                                }
                            </td>
                        </tr>
                    </table>
                }
                case BusinessType.UnincorporatedBody => {
                    <table class="table--spaced-top">
                        <tr>
                            <th>@Messages("businessmatching.typeofbusiness.heading")</th>
                            <td width="12"><a href="@controllers.businessmatching.routes.TypeOfBusinessController.get(true)">@Messages("button.edit")</a></td>
                        </tr>
                        <tr>
                            <td colspan="2">
                                @model.typeOfBusiness.map {business =>
                                    @business.typeOfBusiness
                                }
                            </td>
                        </tr>
                    </table>
                }
                case _ => {}

            }
        }
    }

    @model.activities.map { activity =>
        <table class="table--spaced-top">
            <tr>
                <th>@Messages("businessmatching.registerservices.heading")</th>
                <td width="12"><a href="@controllers.businessmatching.routes.RegisterServicesController.get(true)">@Messages("button.edit")</a></td>
            </tr>
            @activity.businessActivities.map { line =>
            <tr>
                <td colspan="2">
                    @line match {
                        case AccountancyServices => {@Messages("businessmatching.registerservices.servicename.lbl.01")}
                        case BillPaymentServices => {@Messages("businessmatching.registerservices.servicename.lbl.02")}
                        case EstateAgentBusinessService => {@Messages("businessmatching.registerservices.servicename.lbl.03")}
                        case HighValueDealing => {@Messages("businessmatching.registerservices.servicename.lbl.04")}
                        case MoneyServiceBusiness => {@Messages("businessmatching.registerservices.servicename.lbl.05")}
                        case TrustAndCompanyServices => {@Messages("businessmatching.registerservices.servicename.lbl.06")}
                        case TelephonePaymentService => {@Messages("businessmatching.registerservices.servicename.lbl.07")}
                    }
                </td>
            </tr>
            }
        </table>


        @if(activity.businessActivities.contains(MoneyServiceBusiness)) {
            @model.msbServices.map { services =>
                <!-- original table-based solution -->
                <table class="summary">
                    <tr>
                        <th>@Messages("businessmatching.services.heading")</th>
                        <th class="edit" width="12"><a href="@controllers.businessmatching.routes.ServicesController.get(true)">Edit</a></th>
                    </tr>
                    @services.services.map { svc =>
                    <tr>
                        <td colspan="2">
                            @svc match {
                            case TransmittingMoney => {@Messages("businessmatching.services.list.lbl.01")}
                            case CurrencyExchange => {@Messages("businessmatching.services.list.lbl.02")}
                            case ChequeCashingNotScrapMetal => {@Messages("businessmatching.services.list.lbl.03")}
                            case ChequeCashingScrapMetal => {@Messages("businessmatching.services.list.lbl.04")}
                            }
                        </td>
                    </tr>
                    }
                </table>


                @if(services.services.contains(TransmittingMoney)) {
                    @model.businessAppliedForPSRNumber.map { psr =>
                        <table class="summary">
                            <tr>
                                <th>@Messages("businessmatching.psr.number.title")</th>
                                <th class="edit" width="12"><a href="@controllers.businessmatching.routes.BusinessAppliedForPSRNumberController.get(true)">Edit</a></th>
                            </tr>
                            <tr>
                                <td colspan="2">
                                    @psr match {
                                        case BusinessAppliedForPSRNumberNo => {
                                            @Messages("lbl.no")
                                            }
                                        case BusinessAppliedForPSRNumberYes(number) => {
                                        @Messages("lbl.yes")
                                </td>
                            <tr>
                                <td colspan="2">
                                    @Messages("businessmatching.psr.number.lbl") : @number
                                        }
                                    }
                                </td>
                            </tr>
                        </table>
                    }
                }
            }
        }
    }
    @model.businessAppliedForPSRNumber.map { psr =>
        @psr match {
            case BusinessAppliedForPSRNumberNo => {
                <div class="form-group">
                    <a class="button" href="@appConfig.logoutUrl">
                        @Messages("button.logout")
                    </a>
                </div>
            }
            case BusinessAppliedForPSRNumberYes(number) => {
                <a class="button" href="@controllers.routes.RegistrationProgressController.get()">@Messages("businessmatching.button.confirm.start")</a>
            }
        }
    }
    @if(model.businessAppliedForPSRNumber.isEmpty) {
        <a class="button" href="@controllers.routes.RegistrationProgressController.get()">@Messages("businessmatching.button.confirm.start")</a>
    }
}
