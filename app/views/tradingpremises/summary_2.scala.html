@import include._
@import models.tradingpremises._
@import models.businessmatching.MoneyServiceBusiness
@import forms2._
@import utils._

@(model: TradingPremises, index: Int)(implicit request: Request[_], lang: Lang)
@header = {
    @heading("summary.detailedanswers.title", "summary.tradingpremises")
}
@main(
    title = Messages("summary.detailedanswers.title"),
    heading = header
) {
    @model.businessStructure.map {x=>
    <table>
        <tr>
            <th>@Messages("tradingpremises.businessStructure.heading")</th>
            <td width="12"><a href="@controllers.tradingpremises.routes.BusinessStructureController.get(index, true)">@Messages("button.edit")</a></td>
        </tr>
        <tr>
            <td colspan="2">
                @Messages(x.message)
            </td>
        </tr>
    </table>
    }
    @model.agentName.map {x=>
    <table>
        <tr>
            <th>@Messages("tradingpremises.agentname.heading")</th>
            <td width="12"><a href="@controllers.tradingpremises.routes.AgentNameController.get(index, true)">@Messages("button.edit")</a></td>
        </tr>
        <tr>
            <td colspan="2">
                 @x.agentName
            </td>
        </tr>
    </table>
    }
    @model.agentPartnership.map {x=>
    <table>
        <tr>
            <th>@Messages("tradingpremises.agentpartnership.heading")</th>
            <td width="12"><a href="@controllers.tradingpremises.routes.AgentPartnershipController.get(index, true)">@Messages("button.edit")</a></td>
        </tr>
        <tr>
            <td colspan="2">
                 @x.agentPartnership
            </td>
        </tr>
    </table>
    }
    @model.agentCompanyName.map {x=>
    <table>
        <tr>
            <th>@Messages("tradingpremises.agentcompanyname.heading")</th>
            <td width="12"><a href="@controllers.tradingpremises.routes.AgentCompanyNameController.get(index, true)">@Messages("button.edit")</a></td>
        </tr>
        <tr>
            <td colspan="2">
                @x.agentCompanyName
            </td>
        </tr>
    </table>
    }
    @model.yourTradingPremises.map { yta =>
        <table class="spacesummary">
            <tbody>
                <tr>
                    <th colspan="3">@yta.tradingName</th>
                </tr>
            </tbody>
            <tr>
                <td width="40%">Address:</td>
                <td>
                    @yta.tradingPremisesAddress.toLines.map { l =>
                    @l<br />
                    }
                </td>
                <td class="numeric">
                    <a href="@controllers.tradingpremises.routes.WhereAreTradingPremisesController.get(index, true)">
                        @Messages("button.edit")
                    </a>
                </td>
            </tr>
            <tr>
                <td width="40%">Trading start date:</td>
                <td>
                    @DateHelper.formatDate(yta.startDate)
                </td>
                <td class="numeric">
                    <a href="@controllers.tradingpremises.routes.WhereAreTradingPremisesController.get(index, true)">
                        @Messages("button.edit")
                    </a>
                </td>
            </tr>
            <tr>
                <td width="40%">Residential address:</td>
                <td>
                    @yta.isResidential match {
                    case true => { Yes }
                    case false => { No }
                    }
                </td>
                <td class="numeric">
                    <a href="@controllers.tradingpremises.routes.WhereAreTradingPremisesController.get(index, true)">
                        @Messages("button.edit")
                    </a>
                </td>
            </tr>
            <tr>
                <td width="40%">Services at this address:</td>
                <td>
                    @model.whatDoesYourBusinessDoAtThisAddress.map { ba =>
                    @ba.activities.map { a =>
                    @a.getMessage<br />
                    }
                    }
                </td>
                <td class="numeric">
                    <a href="@controllers.tradingpremises.routes.WhatDoesYourBusinessDoController.get(index, true)">
                        @Messages("button.edit")
                    </a>
                </td>
            </tr>
            <tr>
                <td width="40%">Who uses these premises:</td>
                <td>
                    @model.businessStructure.fold(Html(Messages("tradingpremises.summary.mybusiness"))) { _ =>
                    @Messages("tradingpremises.summary.agents")
                    }
                </td>
                <td class="numeric">
                    <a href="@controllers.tradingpremises.routes.RegisteringAgentPremisesController.get(index, true)">
                        @Messages("button.edit")
                    </a>
                </td>
            </tr>
        </table>
    }
    <div class="form-group">
        <a class="button" href="@controllers.tradingpremises.routes.SummaryController.get()">
            @Messages("button.confirmandcontinue")
        </a>
    </div>
}
