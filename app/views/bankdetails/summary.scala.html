@import include._
@import models.bankdetails._
@import forms2._

@(model: Seq[BankDetails], complete: Boolean)(implicit request: Request[_], lang: Lang)

@header = {
    @heading(if(complete) "summary.youranswers.title" else "summary.checkyouranswers.title", "summary.bankdetails")
}


@main(
    title = if(complete) Messages("summary.youranswers.title") else Messages("summary.bankdetails.checkyouranswers.title"),
    heading = header
) {

    @if(model.isEmpty){
        <div class="panel-indent">
            @Messages("bankdetails.summary.nobank.account")
            <br><br>
            <a href="@controllers.bankdetails.routes.BankAccountAddController.get(false)"> @Messages("bankdetails.summary.nobank.add.account") </a>
        </div>
        <br><br>
    }

    @if(complete && !model.isEmpty) {
        <div class="panel-indent">
            <a href="@controllers.bankdetails.routes.BankAccountAddController.get(false)"> @Messages("bankdetails.summary.nobank.add.account") </a>
        </div>
        <br><br>
    }
        @model.zipWithIndex.map { case (x, y) =>
            @x.bankAccount.map {bankAccount =>
            <table>
                <tr>
                @bankAccount.account match {
                    case f:UKAccount => {
                        <td width="75%">
                            @bankAccount.accountName
                            <br>
                            @Messages("bankdetails.bankaccount.sortcode"): @f.displaySortCode
                            <br>
                            @Messages("bankdetails.bankaccount.accountnumber"): @f.accountNumber
                            <br>
                            @Messages("lbl.uk") @Messages("bankdetails.summary.bankaccount")
                            <br>
                            @x.bankAccountType.map {
                            case PersonalAccount => {@Messages("bankdetails.summary.accounttype.lbl.01")}
                            case BelongsToBusiness => {@Messages("bankdetails.summary.accounttype.lbl.02")}
                            case BelongsToOtherBusiness => {@Messages("bankdetails.summary.accounttype.lbl.03")}
                            }
                        </td>
                    }
                    case f:NonUKAccountNumber => {
                        <td width="75%">
                            @bankAccount.accountName
                            <br>
                            @Messages("bankdetails.bankaccount.accountnumber"): @f.accountNumber
                            <br>
                            @Messages("lbl.overseas") @Messages("bankdetails.summary.bankaccount")
                            <br>
                            @x.bankAccountType.map {
                            case PersonalAccount => {@Messages("bankdetails.summary.accounttype.lbl.01")}
                            case BelongsToBusiness => {@Messages("bankdetails.summary.accounttype.lbl.02")}
                            case BelongsToOtherBusiness => {@Messages("bankdetails.summary.accounttype.lbl.03")}
                            }
                        </td>
                    }
                    case f:NonUKIBANNumber => {
                            <td width="75%">
                                @bankAccount.accountName
                                <br>
                                @Messages("bankdetails.bankaccount.iban"): @f.IBANNumber
                                <br>
                                @Messages("lbl.overseas") @Messages("bankdetails.summary.bankaccount")
                                <br>
                                @x.bankAccountType.map {
                                case PersonalAccount => {@Messages("bankdetails.summary.accounttype.lbl.01")}
                                case BelongsToBusiness => {@Messages("bankdetails.summary.accounttype.lbl.02")}
                                case BelongsToOtherBusiness => {@Messages("bankdetails.summary.accounttype.lbl.03")}
                                }
                            </td>
                    }
                }
                <td class="numeric"><a href="@controllers.bankdetails.routes.BankAccountTypeController.get(y+1, true)">@Messages("button.edit")</a></td>

                </tr>

             </table>
            }

        }

    @if(complete) {
         <div class="form-group">
            <a class="button" href="@controllers.routes.RegistrationProgressController.get()">
                @Messages("button.confirmandcontinue")
            </a>
         </div>

    } else {
        <a class="button" href="@controllers.routes.RegistrationProgressController.get()">@Messages("button.summary.acceptandcomplete")</a>
    }
}
