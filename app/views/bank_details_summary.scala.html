@import include._
@import models.bankdetails._
@import forms2._

@(model: Seq[BankDetails])(implicit request: Request[_], lang: Lang)

@main(
    title = Messages("summary.checkyouranswers.title")
) {

    @heading("summary.checkyouranswers.title", "summary.bankdetails")

    @fieldset("", jsHidden = false, id = "ttt") {
        <span>@Messages("bankdetails.summary.check.info")</span> <br>
        <a href="@controllers.bankdetails.routes.BankAccountTypeController.get(model.length+1, false)">@Messages("bankdetails.summary.add.account")</a>
    }

    @model.zipWithIndex.map { case(x, y) =>
        <table>
            <tr>
                <th class="summary-title" colspan="3">@x.bankAccount.map {z => @z.accountName}</th>
                <td><a href="@controllers.bankdetails.routes.BankAccountTypeController.get(y+1, true)">@Messages("button.edit")</a></td>
            </tr>
            <tr>
                @x.bankAccount.map {bankAccount =>
                    @bankAccount.account match {
                        case f:UKAccount => {
                            <td>
                                @f.accountNumber
                            </td>
                            <td>
                                @f.sortCode
                            </td>
                        }
                        case f:NonUKAccountNumber => {
                            <td>
                                @f.accountNumber
                            </td>
                        }
                        case f:NonUKIBANNumber => {
                            <td>
                                @f.IBANNumber
                            </td>
                        }
                    }
                }
               <td>
                   @x.bankAccountType.map {accountType =>
                        @accountType match {
                            case PersonalAccount => {@Messages("bankdetails.summary.accounttype.lbl.01")}
                            case BelongsToBusiness => {@Messages("bankdetails.summary.accounttype.lbl.02")}
                            case BelongsToOtherBusiness => {@Messages("bankdetails.summary.accounttype.lbl.03")}
                            case NoBankAccount => {@Messages("bankdetails.accounttype.lbl.04")}
                        }
                   }
               </td>
                @x.bankAccount.map {bankAccount =>
                    @bankAccount.account match {
                        case f:UKAccount => {
                            <td>
                                @Messages("lbl.uk")
                            </td>
                        }
                        case f:NonUKAccountNumber => {
                            <td>
                                @Messages("lbl.nonuk")
                            </td>
                        }
                        case f:NonUKIBANNumber => {
                            <td>
                                @Messages("lbl.nonuk")
                            </td>
                        }
                    }
                }
            </tr>

        </table>
    }
    <a class="button" href="@controllers.routes.MainSummaryController.onPageLoad()">@Messages("button.summary.acceptandcomplete")</a>
}
