/*
 * Copyright 2018 HM Revenue & Customs
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

package controllers.testonly

import config.{AMLSAuthConnector, AmlsShortLivedCache, BusinessCustomerSessionCache}
import connectors.AmlsConnector
import controllers.BaseController
import forms.{EmptyForm, Form2}
import play.api.libs.json.Json
import uk.gov.hmrc.play.frontend.auth.Actions
import uk.gov.hmrc.play.frontend.auth.connectors.AuthConnector
import views.html.status.status_submitted
import jto.validation.{Path, ValidationError}
import models.UpdateSave4LaterResponse

import scala.concurrent.ExecutionContext.Implicits.global
import scala.concurrent.Future

object TestOnlyController extends TestOnlyController {
  override protected def authConnector: AuthConnector = AMLSAuthConnector
}

trait TestOnlyController extends BaseController with Actions {

  def dropSave4Later = Authorised.async {
    implicit user =>
      implicit request =>
        BusinessCustomerSessionCache.remove()
        AmlsShortLivedCache.remove(user.user.oid).map { x =>
          Ok("Cache successfully cleared")
        }
  }

  def updateSave4Later(filename:String)  = Authorised.async {
    implicit user =>
      implicit request =>

        val JsonBody = "{\n  \"_id\" : \"5b0e44b03a0000e00e8c9c37\",\n  \"view\" : {\n    \"etmpFormBundleNumber\" : \"123456789012\",\n    \"businessMatchingSection\" : {\n      \"businessName\" : \"BusinessAddressLine1\",\n      \"businessType\" : \"Sole Trader\",\n      \"businessAddress\" : {\n        \"line_1\" : \"BusinessAddressLine1\",\n        \"line_2\" : \"BusinessAddressLine2\",\n        \"line_3\" : \"BusinessAddressLine3\",\n        \"line_4\" : \"BusinessAddressLine4\",\n        \"postcode\" : \"ne00qw\",\n        \"country\" : \"AD\"\n      },\n      \"safeId\" : \"\",\n      \"businessActivities\" : [ \"03\", \"07\", \"02\", \"05\", \"01\", \"06\", \"04\" ],\n      \"msbServices\" : [ \"01\", \"02\", \"03\", \"04\" ],\n      \"appliedFor\" : true,\n      \"regNumber\" : \"123456\",\n      \"hasChanged\" : false,\n      \"hasAccepted\" : false,\n      \"preAppComplete\" : false\n    },\n    \"eabSection\" : {\n      \"services\" : [ \"08\", \"03\", \"07\", \"02\", \"05\", \"01\", \"06\", \"09\", \"04\" ],\n      \"isRedress\" : true,\n      \"propertyRedressScheme\" : \"01\",\n      \"penalised\" : true,\n      \"professionalBody\" : \"PrevWarnWRegProvideDetails\",\n      \"penalisedUnderEstateAgentsAct\" : true,\n      \"penalisedUnderEstateAgentsActDetails\" : \"EstAgncActProhibProvideDetails\",\n      \"hasChanged\" : false,\n      \"hasAccepted\" : false\n    },\n    \"tradingPremisesSection\" : [ {\n      \"registeringAgentPremises\" : {\n        \"agentPremises\" : true\n      },\n      \"yourTradingPremises\" : {\n        \"tradingName\" : \"TradingName\",\n        \"addressLine1\" : \"AddressLine1\",\n        \"addressLine4\" : \"AddressLine4\",\n        \"postcode\" : \"ne00qw\",\n        \"addressLine3\" : \"AddressLine3\",\n        \"addressLine2\" : \"AddressLine2\",\n        \"isResidential\" : true,\n        \"startDate\" : \"2001-01-01\"\n      },\n      \"businessStructure\" : {\n        \"agentsBusinessStructure\" : \"01\"\n      },\n      \"agentName\" : {\n        \"agentName\" : \"AgentLegalEntityName\"\n      },\n      \"whatDoesYourBusinessDoAtThisAddress\" : {\n        \"activities\" : [ \"03\", \"07\", \"02\", \"05\", \"01\", \"06\", \"04\" ]\n      },\n      \"msbServices\" : {\n        \"msbServices\" : [ \"01\", \"02\", \"03\", \"04\" ]\n      },\n      \"hasChanged\" : false,\n      \"lineId\" : 333333,\n      \"hasAccepted\" : false\n    }, {\n      \"registeringAgentPremises\" : {\n        \"agentPremises\" : true\n      },\n      \"yourTradingPremises\" : {\n        \"tradingName\" : \"aaaaaaaaaaaa\",\n        \"addressLine1\" : \"a\",\n        \"addressLine4\" : \"a\",\n        \"postcode\" : \"ne00qw\",\n        \"addressLine3\" : \"a\",\n        \"addressLine2\" : \"a\",\n        \"isResidential\" : true,\n        \"startDate\" : \"1967-08-13\"\n      },\n      \"businessStructure\" : {\n        \"agentsBusinessStructure\" : \"01\"\n      },\n      \"agentName\" : {\n        \"agentName\" : \"aaaaaaaaaaa\"\n      },\n      \"whatDoesYourBusinessDoAtThisAddress\" : {\n        \"activities\" : [ \"03\", \"07\", \"02\", \"05\", \"01\", \"06\", \"04\" ]\n      },\n      \"msbServices\" : {\n        \"msbServices\" : [ \"01\", \"02\", \"03\", \"04\" ]\n      },\n      \"hasChanged\" : false,\n      \"lineId\" : 444444,\n      \"hasAccepted\" : false\n    }, {\n      \"registeringAgentPremises\" : {\n        \"agentPremises\" : true\n      },\n      \"yourTradingPremises\" : {\n        \"tradingName\" : \"TradingName\",\n        \"addressLine1\" : \"AgentAddressLine1\",\n        \"addressLine4\" : \"AgentAddressLine4\",\n        \"postcode\" : \"ne00qw\",\n        \"addressLine3\" : \"AgentAddressLine3\",\n        \"addressLine2\" : \"AgentAddressLine2\",\n        \"isResidential\" : true,\n        \"startDate\" : \"2001-01-01\"\n      },\n      \"businessStructure\" : {\n        \"agentsBusinessStructure\" : \"01\"\n      },\n      \"agentName\" : {\n        \"agentName\" : \"AgentLegalEntityName2\"\n      },\n      \"whatDoesYourBusinessDoAtThisAddress\" : {\n        \"activities\" : [ \"03\", \"07\", \"02\", \"05\", \"01\", \"06\", \"04\" ]\n      },\n      \"msbServices\" : {\n        \"msbServices\" : [ \"01\", \"02\", \"03\", \"04\" ]\n      },\n      \"hasChanged\" : false,\n      \"lineId\" : 555555,\n      \"hasAccepted\" : false\n    }, {\n      \"registeringAgentPremises\" : {\n        \"agentPremises\" : true\n      },\n      \"yourTradingPremises\" : {\n        \"tradingName\" : \"TName\",\n        \"addressLine1\" : \"AgentAddressLine1\",\n        \"addressLine4\" : \"AgentAddressLine4\",\n        \"postcode\" : \"ne00qw\",\n        \"addressLine3\" : \"AgentAddressLine3\",\n        \"addressLine2\" : \"AgentAddressLine2\",\n        \"isResidential\" : true,\n        \"startDate\" : \"2001-01-01\"\n      },\n      \"businessStructure\" : {\n        \"agentsBusinessStructure\" : \"02\"\n      },\n      \"agentCompanyDetails\" : {\n        \"agentCompanyName\" : \"AnotherAgentLegalEntityName2\",\n        \"companyRegistrationNumber\" : \"12345678\"\n      },\n      \"whatDoesYourBusinessDoAtThisAddress\" : {\n        \"activities\" : [ \"03\", \"07\", \"02\", \"05\", \"01\", \"06\", \"04\" ]\n      },\n      \"msbServices\" : {\n        \"msbServices\" : [ \"01\", \"02\", \"03\", \"04\" ]\n      },\n      \"hasChanged\" : false,\n      \"lineId\" : 666666,\n      \"hasAccepted\" : false\n    }, {\n      \"registeringAgentPremises\" : {\n        \"agentPremises\" : false\n      },\n      \"yourTradingPremises\" : {\n        \"tradingName\" : \"OwnBusinessTradingName\",\n        \"addressLine1\" : \"OwnBusinessAddressLine1\",\n        \"addressLine4\" : \"OwnBusinessAddressLine4\",\n        \"postcode\" : \"ne00qw\",\n        \"addressLine3\" : \"OwnBusinessAddressLine3\",\n        \"addressLine2\" : \"OwnBusinessAddressLine2\",\n        \"isResidential\" : false,\n        \"startDate\" : \"2001-01-01\"\n      },\n      \"whatDoesYourBusinessDoAtThisAddress\" : {\n        \"activities\" : [ \"03\", \"07\", \"02\", \"05\", \"01\", \"06\", \"04\" ]\n      },\n      \"msbServices\" : {\n        \"msbServices\" : [ \"01\", \"02\", \"03\", \"04\" ]\n      },\n      \"hasChanged\" : false,\n      \"lineId\" : 111111,\n      \"hasAccepted\" : false\n    }, {\n      \"registeringAgentPremises\" : {\n        \"agentPremises\" : false\n      },\n      \"yourTradingPremises\" : {\n        \"tradingName\" : \"OwnBusinessTradingName1\",\n        \"addressLine1\" : \"OB11AddressLine1\",\n        \"addressLine4\" : \"OB1AddressLine4\",\n        \"postcode\" : \"ne00qw\",\n        \"addressLine3\" : \"OB1AddressLine3\",\n        \"addressLine2\" : \"OB1AddressLine2\",\n        \"isResidential\" : false,\n        \"startDate\" : \"2001-01-01\"\n      },\n      \"whatDoesYourBusinessDoAtThisAddress\" : {\n        \"activities\" : [ \"03\", \"07\", \"02\", \"05\", \"01\", \"06\", \"04\" ]\n      },\n      \"msbServices\" : {\n        \"msbServices\" : [ \"01\", \"02\", \"03\", \"04\" ]\n      },\n      \"hasChanged\" : false,\n      \"lineId\" : 222222,\n      \"hasAccepted\" : false\n    } ],\n    \"aboutTheBusinessSection\" : {\n      \"previouslyRegistered\" : {\n        \"previouslyRegistered\" : true,\n        \"prevMLRRegNo\" : \"12345678\"\n      },\n      \"vatRegistered\" : {\n        \"registeredForVAT\" : true,\n        \"vrnNumber\" : \"123456789\"\n      },\n      \"corporationTaxRegistered\" : {\n        \"registeredForCorporationTax\" : true,\n        \"corporationTaxReference\" : \"1234567891\"\n      },\n      \"contactingYou\" : {\n        \"phoneNumber\" : \"01921232322\",\n        \"email\" : \"business@email.com\"\n      },\n      \"registeredOffice\" : {\n        \"addressLine1\" : \"BusinessAddressLine1\",\n        \"addressLine2\" : \"BusinessAddressLine2\",\n        \"addressLine3\" : \"BusinessAddressLine3\",\n        \"addressLine4\" : \"BusinessAddressLine4\",\n        \"postCode\" : \"ne00qw\",\n        \"dateOfChange\" : null\n      },\n      \"altCorrespondenceAddress\" : true,\n      \"correspondenceAddress\" : {\n        \"yourName\" : \"Name\",\n        \"businessName\" : \"TradingName\",\n        \"correspondenceAddressLine1\" : \"AlternativeAddressLine1\",\n        \"correspondenceAddressLine2\" : \"AlternativeAddressLine2\",\n        \"correspondenceAddressLine3\" : \"AlternativeAddressLine3\",\n        \"correspondenceAddressLine4\" : \"AlternativeAddressLine4\",\n        \"correspondencePostCode\" : \"ne00qw\"\n      },\n      \"hasChanged\" : false,\n      \"hasAccepted\" : false\n    },\n    \"bankDetailsSection\" : [ {\n      \"bankAccountType\" : {\n        \"bankAccountType\" : \"02\"\n      },\n      \"accountName\" : \"AccountName\",\n      \"bankAccount\" : {\n        \"isUK\" : true,\n        \"accountNumber\" : \"12345678\",\n        \"sortCode\" : \"123456\"\n      },\n      \"hasChanged\" : false,\n      \"refreshedFromServer\" : false,\n      \"hasAccepted\" : false\n    }, {\n      \"bankAccountType\" : {\n        \"bankAccountType\" : \"01\"\n      },\n      \"accountName\" : \"AccountName1\",\n      \"bankAccount\" : {\n        \"isUK\" : false,\n        \"IBANNumber\" : \"87654321\",\n        \"isIBAN\" : true\n      },\n      \"hasChanged\" : false,\n      \"refreshedFromServer\" : false,\n      \"hasAccepted\" : false\n    }, {\n      \"bankAccountType\" : {\n        \"bankAccountType\" : \"03\"\n      },\n      \"accountName\" : \"AccountName2\",\n      \"bankAccount\" : {\n        \"isUK\" : false,\n        \"nonUKAccountNumber\" : \"87654321\",\n        \"isIBAN\" : false\n      },\n      \"hasChanged\" : false,\n      \"refreshedFromServer\" : false,\n      \"hasAccepted\" : false\n    } ],\n    \"aboutYouSection\" : {\n      \"firstName\" : \"string\",\n      \"middleName\" : \"string\",\n      \"lastName\" : \"string\",\n      \"roleWithinBusiness\" : [ \"Other\", \"Partner\", \"NominatedOfficer\", \"Director\", \"BeneficialShareholder\" ],\n      \"roleWithinBusinessOther\" : \"manager\"\n    },\n    \"businessActivitiesSection\" : {\n      \"involvedInOther\" : false,\n      \"expectedAMLSTurnover\" : \"04\",\n      \"businessFranchise\" : true,\n      \"franchiseName\" : \"FranchiserName1\",\n      \"isRecorded\" : true,\n      \"transactionTypes\" : {\n        \"types\" : [ \"01\", \"02\", \"03\" ],\n        \"software\" : \"CommercialPackageName\"\n      },\n      \"isOutside\" : true,\n      \"countries\" : [ \"AD\", \"GB\" ],\n      \"ncaRegistered\" : true,\n      \"hasWrittenGuidance\" : true,\n      \"hasPolicy\" : true,\n      \"riskassessments\" : [ \"02\", \"01\" ],\n      \"employeeCount\" : \"12345678901\",\n      \"employeeCountAMLSSupervision\" : \"11223344556\",\n      \"hasChanged\" : false,\n      \"hasAccepted\" : false\n    },\n    \"responsiblePeopleSection\" : [ {\n      \"personName\" : {\n        \"firstName\" : \"FirstName\",\n        \"middleName\" : \"MiddleName\",\n        \"lastName\" : \"LastName\"\n      },\n      \"legalName\" : {\n        \"hasPreviousName\" : true,\n        \"firstName\" : \"FirstName\",\n        \"middleName\" : \"MiddleName\",\n        \"lastName\" : \"LastName\"\n      },\n      \"legalNameChangeDate\" : \"2001-01-01\",\n      \"knownBy\" : {\n        \"hasOtherNames\" : true,\n        \"otherNames\" : \"Aliases1 Aliases2 Aliases3 Aliases4\"\n      },\n      \"personResidenceType\" : {\n        \"isUKResidence\" : \"false\",\n        \"countryOfBirth\" : \"AD\",\n        \"nationality\" : \"AD\"\n      },\n      \"ukPassport\" : {\n        \"ukPassport\" : true,\n        \"ukPassportNumber\" : \"GB1234567\"\n      },\n      \"dateOfBirth\" : {\n        \"dateOfBirth\" : \"2001-01-01\"\n      },\n      \"contactDetails\" : {\n        \"phoneNumber\" : \"098765\",\n        \"emailAddress\" : \"email@mailme.com\"\n      },\n      \"addressHistory\" : {\n        \"currentAddress\" : {\n          \"personAddress\" : {\n            \"personAddressLine1\" : \"CurrentAddressLine1\",\n            \"personAddressLine2\" : \"CurrentAddressLine2\",\n            \"personAddressLine3\" : \"CurrentAddressLine3\",\n            \"personAddressLine4\" : \"CurrentAddressLine4\",\n            \"personAddressPostCode\" : \"ne00qw\"\n          },\n          \"timeAtAddress\" : {\n            \"timeAtAddress\" : \"01\"\n          }\n        },\n        \"additionalAddress\" : {\n          \"personAddress\" : {\n            \"personAddressLine1\" : \"addressUnderThreeYearsLine1\",\n            \"personAddressLine2\" : \"addressUnderThreeYearsLine2\",\n            \"personAddressLine3\" : \"addressUnderThreeYearsLine3\",\n            \"personAddressLine4\" : \"addressUnderThreeYearsLine4\",\n            \"personAddressPostCode\" : \"ne00qw\"\n          },\n          \"timeAtAddress\" : {\n            \"timeAtAddress\" : \"01\"\n          }\n        },\n        \"additionalExtraAddress\" : {\n          \"personAddress\" : {\n            \"personAddressLine1\" : \"AddressUnderOneYearAddressLine1\",\n            \"personAddressLine2\" : \"AddressUnderOneYearAddressLine2\",\n            \"personAddressLine3\" : \"AddressUnderOneYearAddressLine3\",\n            \"personAddressLine4\" : \"AddressUnderOneYearAddressLine4\",\n            \"personAddressPostCode\" : \"ne00qw\"\n          },\n          \"timeAtAddress\" : {\n            \"timeAtAddress\" : \"01\"\n          }\n        }\n      },\n      \"positions\" : {\n        \"positions\" : [ \"04\", \"06\" ],\n        \"startDate\" : \"2010-01-03\"\n      },\n      \"saRegistered\" : {\n        \"saRegistered\" : true,\n        \"utrNumber\" : \"1234567890\"\n      },\n      \"vatRegistered\" : {\n        \"registeredForVAT\" : true,\n        \"vrnNumber\" : \"123456789\"\n      },\n      \"experienceTraining\" : {\n        \"experienceTraining\" : true,\n        \"experienceInformation\" : \"DescOfPrevExperience\"\n      },\n      \"training\" : {\n        \"training\" : true,\n        \"information\" : \"TrainingDetails\"\n      },\n      \"hasAlreadyPassedFitAndProper\" : true,\n      \"hasChanged\" : false,\n      \"hasAccepted\" : false,\n      \"lineId\" : 666666\n    }, {\n      \"personName\" : {\n        \"firstName\" : \"bbbbbbbbbbbb\",\n        \"middleName\" : \"bbbbbbbbbbb\",\n        \"lastName\" : \"bbbbbbbbbbb\"\n      },\n      \"legalName\" : {\n        \"hasPreviousName\" : true,\n        \"firstName\" : \"bbbbbbbbbbbb\",\n        \"middleName\" : \"bbbbbbbbbbbb\",\n        \"lastName\" : \"bbbbbbbbbbbb\"\n      },\n      \"legalNameChangeDate\" : \"1967-08-13\",\n      \"knownBy\" : {\n        \"hasOtherNames\" : true,\n        \"otherNames\" : \"bbbbbbbbbbb\"\n      },\n      \"personResidenceType\" : {\n        \"nino\" : \"BB000000A\",\n        \"countryOfBirth\" : \"GB\",\n        \"nationality\" : \"GB\"\n      },\n      \"contactDetails\" : {\n        \"phoneNumber\" : \"098765\",\n        \"emailAddress\" : \"b@bodod.com\"\n      },\n      \"addressHistory\" : {\n        \"currentAddress\" : {\n          \"personAddress\" : {\n            \"personAddressLine1\" : \"b\",\n            \"personAddressLine2\" : \"b\",\n            \"personAddressLine3\" : \"b\",\n            \"personAddressLine4\" : \"b\",\n            \"personAddressPostCode\" : \"ne00qw\"\n          },\n          \"timeAtAddress\" : {\n            \"timeAtAddress\" : \"01\"\n          }\n        },\n        \"additionalAddress\" : {\n          \"personAddress\" : {\n            \"personAddressLine1\" : \"b\",\n            \"personAddressLine2\" : \"b\",\n            \"personAddressLine3\" : \"b\",\n            \"personAddressLine4\" : \"b\",\n            \"personAddressPostCode\" : \"ne00qw\"\n          },\n          \"timeAtAddress\" : {\n            \"timeAtAddress\" : \"01\"\n          }\n        },\n        \"additionalExtraAddress\" : {\n          \"personAddress\" : {\n            \"personAddressLine1\" : \"a\",\n            \"personAddressLine2\" : \"a\",\n            \"personAddressLine3\" : \"a\",\n            \"personAddressLine4\" : \"a\",\n            \"personAddressPostCode\" : \"ne00qw\"\n          },\n          \"timeAtAddress\" : {\n            \"timeAtAddress\" : \"01\"\n          }\n        }\n      },\n      \"positions\" : {\n        \"positions\" : [ \"04\", \"06\" ],\n        \"startDate\" : \"2010-01-01\"\n      },\n      \"saRegistered\" : {\n        \"saRegistered\" : true,\n        \"utrNumber\" : \"1111111111\"\n      },\n      \"vatRegistered\" : {\n        \"registeredForVAT\" : true,\n        \"vrnNumber\" : \"111111111\"\n      },\n      \"experienceTraining\" : {\n        \"experienceTraining\" : true,\n        \"experienceInformation\" : \"bbbbbbbbbb\"\n      },\n      \"training\" : {\n        \"training\" : true,\n        \"information\" : \"bbbbbbbbbbb\"\n      },\n      \"hasAlreadyPassedFitAndProper\" : true,\n      \"hasChanged\" : false,\n      \"hasAccepted\" : false,\n      \"lineId\" : 777777\n    } ],\n    \"tcspSection\" : {\n      \"tcspTypes\" : {\n        \"serviceProviders\" : [ \"05\", \"04\", \"03\", \"02\", \"01\" ],\n        \"onlyOffTheShelfCompsSold\" : true,\n        \"complexCorpStructureCreation\" : true\n      },\n      \"providedServices\" : {\n        \"services\" : [ \"08\", \"05\", \"04\", \"03\", \"06\", \"02\", \"07\", \"01\" ],\n        \"details\" : \"SpecifyOther\"\n      },\n      \"doesServicesOfAnotherTCSP\" : true,\n      \"servicesOfAnotherTCSP\" : {\n        \"servicesOfAnotherTCSP\" : true,\n        \"mlrRefNumber\" : \"111111111111111\"\n      },\n      \"hasChanged\" : false,\n      \"hasAccepted\" : false\n    },\n    \"aspSection\" : {\n      \"services\" : {\n        \"services\" : [ \"03\", \"02\", \"05\", \"01\", \"04\" ]\n      },\n      \"otherBusinessTaxMatters\" : {\n        \"otherBusinessTaxMatters\" : true\n      },\n      \"hasChanged\" : false,\n      \"hasAccepted\" : false\n    },\n    \"msbSection\" : {\n      \"throughput\" : {\n        \"throughput\" : \"03\"\n      },\n      \"businessUseAnIPSP\" : {\n        \"useAnIPSP\" : true,\n        \"name\" : \"IPSPName1\",\n        \"referenceNumber\" : \"IPSPMLRRegNo1\"\n      },\n      \"identifyLinkedTransactions\" : {\n        \"linkedTxn\" : true\n      },\n      \"whichCurrencies\" : {\n        \"currencies\" : [ \"GBP\", \"EUR\", \"USD\" ],\n        \"usesForeignCurrencies\" : true,\n        \"bankMoneySource\" : \"Yes\",\n        \"bankNames\" : \"Bank1aaijdjsdjsodjsjosodjsldkpakdsjsdofmslcopsmxclmxksaaasasasasasaasasasasasassaaasafdgghfdfcddsfxddfdsddfdfdffdfdfdfdfdfdfddfddffddffghhhh\",\n        \"wholesalerMoneySource\" : \"Yes\",\n        \"wholesalerNames\" : \"CurrencyWholesalerNames\",\n        \"customerMoneySource\" : \"Yes\"\n      },\n      \"sendMoneyToOtherCountry\" : {\n        \"money\" : true\n      },\n      \"fundsTransfer\" : {\n        \"transferWithoutFormalSystems\" : true\n      },\n      \"branchesOrAgents\" : {\n        \"hasCountries\" : true,\n        \"countries\" : [ \"AD\", \"GB\" ]\n      },\n      \"sendTheLargestAmountsOfMoney\" : {\n        \"country_1\" : \"GB\",\n        \"country_2\" : \"AD\"\n      },\n      \"mostTransactions\" : {\n        \"mostTransactionsCountries\" : [ \"AD\", \"GB\" ]\n      },\n      \"transactionsInNext12Months\" : {\n        \"txnAmount\" : \"11111111111\"\n      },\n      \"ceTransactionsInNext12Months\" : {\n        \"ceTransaction\" : \"123456\"\n      },\n      \"hasChanged\" : false,\n      \"hasAccepted\" : false\n    },\n    \"hvdSection\" : {\n      \"cashPayment\" : {\n        \"acceptedAnyPayment\" : true,\n        \"paymentDate\" : \"2001-01-01\"\n      },\n      \"products\" : {\n        \"products\" : [ \"12\", \"08\", \"09\", \"11\", \"05\", \"04\", \"10\", \"03\", \"06\", \"02\", \"07\", \"01\" ],\n        \"otherDetails\" : \"SpecifyOther\"\n      },\n      \"exciseGoods\" : {\n        \"exciseGoods\" : true\n      },\n      \"howWillYouSellGoods\" : {\n        \"salesChannels\" : [ \"Retail\", \"Wholesale\", \"Auction\" ]\n      },\n      \"percentageOfCashPaymentOver15000\" : {\n        \"percentage\" : \"01\"\n      },\n      \"receiveCashPayments\" : true,\n      \"cashPaymentMethods\" : {\n        \"courier\" : true,\n        \"direct\" : true,\n        \"other\" : true,\n        \"details\" : \"aaaaaaaaaaaaa\"\n      },\n      \"linkedCashPayment\" : {\n        \"linkedCashPayments\" : true\n      },\n      \"hasChanged\" : false,\n      \"hasAccepted\" : false\n    },\n    \"supervisionSection\" : {\n      \"anotherBody\" : {\n        \"anotherBody\" : true,\n        \"supervisorName\" : \"NameOfLastSupervisor\",\n        \"startDate\" : \"2001-01-01\",\n        \"endDate\" : \"2001-01-01\",\n        \"endingReason\" : \"SupervisionEndingReason\"\n      },\n      \"professionalBodyMember\" : {\n        \"isAMember\" : true\n      },\n      \"professionalBodies\" : {\n        \"businessType\" : [ \"12\", \"08\", \"09\", \"11\", \"13\", \"05\", \"04\", \"10\", \"03\", \"06\", \"14\", \"02\", \"07\", \"01\" ],\n        \"specifyOtherBusiness\" : \"SpecifyOther\"\n      },\n      \"professionalBody\" : {\n        \"penalised\" : true,\n        \"professionalBody\" : \"DetailsIfFinedWarned\"\n      },\n      \"hasChanged\" : false,\n      \"hasAccepted\" : false\n    }\n  },\n  \"businessMatching\" : {\n    \"businessName\" : \"BusinessAddressLine1\",\n    \"businessType\" : \"Sole Trader\",\n    \"businessAddress\" : {\n      \"line_1\" : \"BusinessAddressLine1\",\n      \"line_2\" : \"BusinessAddressLine2\",\n      \"line_3\" : \"BusinessAddressLine3\",\n      \"line_4\" : \"BusinessAddressLine4\",\n      \"postcode\" : \"ne00qw\",\n      \"country\" : \"AD\"\n    },\n    \"safeId\" : \"\",\n    \"businessActivities\" : [ \"03\", \"07\", \"02\", \"05\", \"01\", \"06\", \"04\" ],\n    \"msbServices\" : [ \"01\", \"02\", \"03\", \"04\" ],\n    \"appliedFor\" : true,\n    \"regNumber\" : \"123456\",\n    \"hasChanged\" : false,\n    \"hasAccepted\" : true,\n    \"preAppComplete\" : true\n  },\n  \"estate-agent-business\" : {\n    \"services\" : [ \"08\", \"03\", \"07\", \"02\", \"05\", \"01\", \"06\", \"09\", \"04\" ],\n    \"isRedress\" : true,\n    \"propertyRedressScheme\" : \"01\",\n    \"penalised\" : true,\n    \"professionalBody\" : \"PrevWarnWRegProvideDetails\",\n    \"penalisedUnderEstateAgentsAct\" : true,\n    \"penalisedUnderEstateAgentsActDetails\" : \"EstAgncActProhibProvideDetails\",\n    \"hasChanged\" : false,\n    \"hasAccepted\" : true\n  },\n  \"tradingPremises\" : [ {\n    \"registeringAgentPremises\" : {\n      \"agentPremises\" : true\n    },\n    \"yourTradingPremises\" : {\n      \"tradingName\" : \"TradingName\",\n      \"addressLine1\" : \"AddressLine1\",\n      \"addressLine4\" : \"AddressLine4\",\n      \"postcode\" : \"ne00qw\",\n      \"addressLine3\" : \"AddressLine3\",\n      \"addressLine2\" : \"AddressLine2\",\n      \"isResidential\" : true,\n      \"startDate\" : \"2001-01-01\"\n    },\n    \"businessStructure\" : {\n      \"agentsBusinessStructure\" : \"01\"\n    },\n    \"agentName\" : {\n      \"agentName\" : \"AgentLegalEntityName\"\n    },\n    \"whatDoesYourBusinessDoAtThisAddress\" : {\n      \"activities\" : [ \"03\", \"07\", \"02\", \"05\", \"01\", \"06\", \"04\" ]\n    },\n    \"msbServices\" : {\n      \"msbServices\" : [ \"01\", \"02\", \"03\", \"04\" ]\n    },\n    \"hasChanged\" : false,\n    \"lineId\" : 333333,\n    \"hasAccepted\" : true\n  }, {\n    \"registeringAgentPremises\" : {\n      \"agentPremises\" : true\n    },\n    \"yourTradingPremises\" : {\n      \"tradingName\" : \"aaaaaaaaaaaa\",\n      \"addressLine1\" : \"a\",\n      \"addressLine4\" : \"a\",\n      \"postcode\" : \"ne00qw\",\n      \"addressLine3\" : \"a\",\n      \"addressLine2\" : \"a\",\n      \"isResidential\" : true,\n      \"startDate\" : \"1967-08-13\"\n    },\n    \"businessStructure\" : {\n      \"agentsBusinessStructure\" : \"01\"\n    },\n    \"agentName\" : {\n      \"agentName\" : \"aaaaaaaaaaa\"\n    },\n    \"whatDoesYourBusinessDoAtThisAddress\" : {\n      \"activities\" : [ \"03\", \"07\", \"02\", \"05\", \"01\", \"06\", \"04\" ]\n    },\n    \"msbServices\" : {\n      \"msbServices\" : [ \"01\", \"02\", \"03\", \"04\" ]\n    },\n    \"hasChanged\" : false,\n    \"lineId\" : 444444,\n    \"hasAccepted\" : true\n  }, {\n    \"registeringAgentPremises\" : {\n      \"agentPremises\" : true\n    },\n    \"yourTradingPremises\" : {\n      \"tradingName\" : \"TradingName\",\n      \"addressLine1\" : \"AgentAddressLine1\",\n      \"addressLine4\" : \"AgentAddressLine4\",\n      \"postcode\" : \"ne00qw\",\n      \"addressLine3\" : \"AgentAddressLine3\",\n      \"addressLine2\" : \"AgentAddressLine2\",\n      \"isResidential\" : true,\n      \"startDate\" : \"2001-01-01\"\n    },\n    \"businessStructure\" : {\n      \"agentsBusinessStructure\" : \"01\"\n    },\n    \"agentName\" : {\n      \"agentName\" : \"AgentLegalEntityName2\"\n    },\n    \"whatDoesYourBusinessDoAtThisAddress\" : {\n      \"activities\" : [ \"03\", \"07\", \"02\", \"05\", \"01\", \"06\", \"04\" ]\n    },\n    \"msbServices\" : {\n      \"msbServices\" : [ \"01\", \"02\", \"03\", \"04\" ]\n    },\n    \"hasChanged\" : false,\n    \"lineId\" : 555555,\n    \"hasAccepted\" : true\n  }, {\n    \"registeringAgentPremises\" : {\n      \"agentPremises\" : true\n    },\n    \"yourTradingPremises\" : {\n      \"tradingName\" : \"TName\",\n      \"addressLine1\" : \"AgentAddressLine1\",\n      \"addressLine4\" : \"AgentAddressLine4\",\n      \"postcode\" : \"ne00qw\",\n      \"addressLine3\" : \"AgentAddressLine3\",\n      \"addressLine2\" : \"AgentAddressLine2\",\n      \"isResidential\" : true,\n      \"startDate\" : \"2001-01-01\"\n    },\n    \"businessStructure\" : {\n      \"agentsBusinessStructure\" : \"02\"\n    },\n    \"agentCompanyDetails\" : {\n      \"agentCompanyName\" : \"AnotherAgentLegalEntityName2\",\n      \"companyRegistrationNumber\" : \"12345678\"\n    },\n    \"whatDoesYourBusinessDoAtThisAddress\" : {\n      \"activities\" : [ \"03\", \"07\", \"02\", \"05\", \"01\", \"06\", \"04\" ]\n    },\n    \"msbServices\" : {\n      \"msbServices\" : [ \"01\", \"02\", \"03\", \"04\" ]\n    },\n    \"hasChanged\" : false,\n    \"lineId\" : 666666,\n    \"hasAccepted\" : true\n  }, {\n    \"registeringAgentPremises\" : {\n      \"agentPremises\" : false\n    },\n    \"yourTradingPremises\" : {\n      \"tradingName\" : \"OwnBusinessTradingName\",\n      \"addressLine1\" : \"OwnBusinessAddressLine1\",\n      \"addressLine4\" : \"OwnBusinessAddressLine4\",\n      \"postcode\" : \"ne00qw\",\n      \"addressLine3\" : \"OwnBusinessAddressLine3\",\n      \"addressLine2\" : \"OwnBusinessAddressLine2\",\n      \"isResidential\" : false,\n      \"startDate\" : \"2001-01-01\"\n    },\n    \"whatDoesYourBusinessDoAtThisAddress\" : {\n      \"activities\" : [ \"03\", \"07\", \"02\", \"05\", \"01\", \"06\", \"04\" ]\n    },\n    \"msbServices\" : {\n      \"msbServices\" : [ \"01\", \"02\", \"03\", \"04\" ]\n    },\n    \"hasChanged\" : false,\n    \"lineId\" : 111111,\n    \"hasAccepted\" : true\n  }, {\n    \"registeringAgentPremises\" : {\n      \"agentPremises\" : false\n    },\n    \"yourTradingPremises\" : {\n      \"tradingName\" : \"OwnBusinessTradingName1\",\n      \"addressLine1\" : \"OB11AddressLine1\",\n      \"addressLine4\" : \"OB1AddressLine4\",\n      \"postcode\" : \"ne00qw\",\n      \"addressLine3\" : \"OB1AddressLine3\",\n      \"addressLine2\" : \"OB1AddressLine2\",\n      \"isResidential\" : false,\n      \"startDate\" : \"2001-01-01\"\n    },\n    \"whatDoesYourBusinessDoAtThisAddress\" : {\n      \"activities\" : [ \"03\", \"07\", \"02\", \"05\", \"01\", \"06\", \"04\" ]\n    },\n    \"msbServices\" : {\n      \"msbServices\" : [ \"01\", \"02\", \"03\", \"04\" ]\n    },\n    \"hasChanged\" : false,\n    \"lineId\" : 222222,\n    \"hasAccepted\" : true\n  } ],\n  \"about-the-business\" : {\n    \"previouslyRegistered\" : {\n      \"previouslyRegistered\" : true,\n      \"prevMLRRegNo\" : \"12345678\"\n    },\n    \"vatRegistered\" : {\n      \"registeredForVAT\" : true,\n      \"vrnNumber\" : \"123456789\"\n    },\n    \"corporationTaxRegistered\" : {\n      \"registeredForCorporationTax\" : true,\n      \"corporationTaxReference\" : \"1234567891\"\n    },\n    \"contactingYou\" : {\n      \"phoneNumber\" : \"01921232322\",\n      \"email\" : \"business@email.com\"\n    },\n    \"registeredOffice\" : {\n      \"addressLine1\" : \"BusinessAddressLine1\",\n      \"addressLine2\" : \"BusinessAddressLine2\",\n      \"addressLine3\" : \"BusinessAddressLine3\",\n      \"addressLine4\" : \"BusinessAddressLine4\",\n      \"postCode\" : \"ne00qw\",\n      \"dateOfChange\" : null\n    },\n    \"altCorrespondenceAddress\" : true,\n    \"correspondenceAddress\" : {\n      \"yourName\" : \"Name\",\n      \"businessName\" : \"TradingName\",\n      \"correspondenceAddressLine1\" : \"AlternativeAddressLine1\",\n      \"correspondenceAddressLine2\" : \"AlternativeAddressLine2\",\n      \"correspondenceAddressLine3\" : \"AlternativeAddressLine3\",\n      \"correspondenceAddressLine4\" : \"AlternativeAddressLine4\",\n      \"correspondencePostCode\" : \"ne00qw\"\n    },\n    \"hasChanged\" : false,\n    \"hasAccepted\" : true\n  },\n  \"bankDetails\" : [ {\n    \"bankAccountType\" : {\n      \"bankAccountType\" : \"02\"\n    },\n    \"accountName\" : \"AccountName\",\n    \"bankAccount\" : {\n      \"isUK\" : true,\n      \"accountNumber\" : \"12345678\",\n      \"sortCode\" : \"123456\"\n    },\n    \"hasChanged\" : false,\n    \"refreshedFromServer\" : false,\n    \"hasAccepted\" : true\n  }, {\n    \"bankAccountType\" : {\n      \"bankAccountType\" : \"01\"\n    },\n    \"accountName\" : \"AccountName1\",\n    \"bankAccount\" : {\n      \"isUK\" : false,\n      \"IBANNumber\" : \"87654321\",\n      \"isIBAN\" : true\n    },\n    \"hasChanged\" : false,\n    \"refreshedFromServer\" : false,\n    \"hasAccepted\" : true\n  }, {\n    \"bankAccountType\" : {\n      \"bankAccountType\" : \"03\"\n    },\n    \"accountName\" : \"AccountName2\",\n    \"bankAccount\" : {\n      \"isUK\" : false,\n      \"nonUKAccountNumber\" : \"87654321\",\n      \"isIBAN\" : false\n    },\n    \"hasChanged\" : false,\n    \"refreshedFromServer\" : false,\n    \"hasAccepted\" : true\n  } ],\n  \"addPerson\" : {\n    \"firstName\" : \"string\",\n    \"middleName\" : \"string\",\n    \"lastName\" : \"string\",\n    \"roleWithinBusiness\" : [ \"Other\", \"Partner\", \"NominatedOfficer\", \"Director\", \"BeneficialShareholder\" ],\n    \"roleWithinBusinessOther\" : \"manager\"\n  },\n  \"businessActivities\" : {\n    \"involvedInOther\" : false,\n    \"expectedAMLSTurnover\" : \"04\",\n    \"businessFranchise\" : true,\n    \"franchiseName\" : \"FranchiserName1\",\n    \"isRecorded\" : true,\n    \"transactionTypes\" : {\n      \"types\" : [ \"01\", \"02\", \"03\" ],\n      \"software\" : \"CommercialPackageName\"\n    },\n    \"isOutside\" : true,\n    \"countries\" : [ \"AD\", \"GB\" ],\n    \"ncaRegistered\" : true,\n    \"hasWrittenGuidance\" : true,\n    \"hasPolicy\" : true,\n    \"riskassessments\" : [ \"02\", \"01\" ],\n    \"employeeCount\" : \"12345678901\",\n    \"employeeCountAMLSSupervision\" : \"11223344556\",\n    \"hasChanged\" : false,\n    \"hasAccepted\" : true\n  },\n  \"tcsp\" : {\n    \"tcspTypes\" : {\n      \"serviceProviders\" : [ \"05\", \"04\", \"03\", \"02\", \"01\" ],\n      \"onlyOffTheShelfCompsSold\" : true,\n      \"complexCorpStructureCreation\" : true\n    },\n    \"providedServices\" : {\n      \"services\" : [ \"08\", \"05\", \"04\", \"03\", \"06\", \"02\", \"07\", \"01\" ],\n      \"details\" : \"SpecifyOther\"\n    },\n    \"doesServicesOfAnotherTCSP\" : true,\n    \"servicesOfAnotherTCSP\" : {\n      \"servicesOfAnotherTCSP\" : true,\n      \"mlrRefNumber\" : \"111111111111111\"\n    },\n    \"hasChanged\" : false,\n    \"hasAccepted\" : true\n  },\n  \"asp\" : {\n    \"services\" : {\n      \"services\" : [ \"03\", \"02\", \"05\", \"01\", \"04\" ]\n    },\n    \"otherBusinessTaxMatters\" : {\n      \"otherBusinessTaxMatters\" : true\n    },\n    \"hasChanged\" : false,\n    \"hasAccepted\" : true\n  },\n  \"msb\" : {\n    \"throughput\" : {\n      \"throughput\" : \"03\"\n    },\n    \"businessUseAnIPSP\" : {\n      \"useAnIPSP\" : true,\n      \"name\" : \"IPSPName1\",\n      \"referenceNumber\" : \"IPSPMLRRegNo1\"\n    },\n    \"identifyLinkedTransactions\" : {\n      \"linkedTxn\" : true\n    },\n    \"whichCurrencies\" : {\n      \"currencies\" : [ \"GBP\", \"EUR\", \"USD\" ],\n      \"usesForeignCurrencies\" : true,\n      \"bankMoneySource\" : \"Yes\",\n      \"bankNames\" : \"Bank1aaijdjsdjsodjsjosodjsldkpakdsjsdofmslcopsmxclmxksaaasasasasasaasasasasasassaaasafdgghfdfcddsfxddfdsddfdfdffdfdfdfdfdfdfddfddffddffghhhh\",\n      \"wholesalerMoneySource\" : \"Yes\",\n      \"wholesalerNames\" : \"CurrencyWholesalerNames\",\n      \"customerMoneySource\" : \"Yes\"\n    },\n    \"sendMoneyToOtherCountry\" : {\n      \"money\" : true\n    },\n    \"fundsTransfer\" : {\n      \"transferWithoutFormalSystems\" : true\n    },\n    \"branchesOrAgents\" : {\n      \"hasCountries\" : true,\n      \"countries\" : [ \"AD\", \"GB\" ]\n    },\n    \"sendTheLargestAmountsOfMoney\" : {\n      \"country_1\" : \"GB\",\n      \"country_2\" : \"AD\"\n    },\n    \"mostTransactions\" : {\n      \"mostTransactionsCountries\" : [ \"AD\", \"GB\" ]\n    },\n    \"transactionsInNext12Months\" : {\n      \"txnAmount\" : \"11111111111\"\n    },\n    \"ceTransactionsInNext12Months\" : {\n      \"ceTransaction\" : \"123456\"\n    },\n    \"hasChanged\" : false,\n    \"hasAccepted\" : true\n  },\n  \"hvd\" : {\n    \"cashPayment\" : {\n      \"acceptedAnyPayment\" : true,\n      \"paymentDate\" : \"2001-01-01\"\n    },\n    \"products\" : {\n      \"products\" : [ \"12\", \"08\", \"09\", \"11\", \"05\", \"04\", \"10\", \"03\", \"06\", \"02\", \"07\", \"01\" ],\n      \"otherDetails\" : \"SpecifyOther\"\n    },\n    \"exciseGoods\" : {\n      \"exciseGoods\" : true\n    },\n    \"howWillYouSellGoods\" : {\n      \"salesChannels\" : [ \"Retail\", \"Wholesale\", \"Auction\" ]\n    },\n    \"percentageOfCashPaymentOver15000\" : {\n      \"percentage\" : \"01\"\n    },\n    \"receiveCashPayments\" : true,\n    \"cashPaymentMethods\" : {\n      \"courier\" : true,\n      \"direct\" : true,\n      \"other\" : true,\n      \"details\" : \"aaaaaaaaaaaaa\"\n    },\n    \"linkedCashPayment\" : {\n      \"linkedCashPayments\" : true\n    },\n    \"hasChanged\" : false,\n    \"hasAccepted\" : true\n  },\n  \"supervision\" : {\n    \"anotherBody\" : {\n      \"anotherBody\" : true,\n      \"supervisorName\" : \"NameOfLastSupervisor\",\n      \"startDate\" : \"2001-01-01\",\n      \"endDate\" : \"2001-01-01\",\n      \"endingReason\" : \"SupervisionEndingReason\"\n    },\n    \"professionalBodyMember\" : {\n      \"isAMember\" : true\n    },\n    \"professionalBodies\" : {\n      \"businessType\" : [ \"12\", \"08\", \"09\", \"11\", \"13\", \"05\", \"04\", \"10\", \"03\", \"06\", \"14\", \"02\", \"07\", \"01\" ],\n      \"specifyOtherBusiness\" : \"SpecifyOther\"\n    },\n    \"professionalBody\" : {\n      \"penalised\" : true,\n      \"professionalBody\" : \"DetailsIfFinedWarned\"\n    },\n    \"hasChanged\" : false,\n    \"hasAccepted\" : true\n  },\n  \"Subscription\" : null,\n  \"AmendVariationResponse\" : null,\n  \"responsible-people\" : [ {\n    \"personName\" : {\n      \"firstName\" : \"FirstName\",\n      \"middleName\" : \"MiddleName\",\n      \"lastName\" : \"LastName\"\n    },\n    \"legalName\" : {\n      \"hasPreviousName\" : true,\n      \"firstName\" : \"FirstName\",\n      \"middleName\" : \"MiddleName\",\n      \"lastName\" : \"LastName\"\n    },\n    \"legalNameChangeDate\" : \"2001-01-01\",\n    \"knownBy\" : {\n      \"hasOtherNames\" : true,\n      \"otherNames\" : \"Aliases1 Aliases2 Aliases3 Aliases4\"\n    },\n    \"personResidenceType\" : {\n      \"isUKResidence\" : \"false\",\n      \"countryOfBirth\" : \"AD\",\n      \"nationality\" : \"AD\"\n    },\n    \"ukPassport\" : {\n      \"ukPassport\" : true,\n      \"ukPassportNumber\" : \"GB1234567\"\n    },\n    \"dateOfBirth\" : {\n      \"dateOfBirth\" : \"2001-01-01\"\n    },\n    \"contactDetails\" : {\n      \"phoneNumber\" : \"098765\",\n      \"emailAddress\" : \"email@mailme.com\"\n    },\n    \"addressHistory\" : {\n      \"currentAddress\" : {\n        \"personAddress\" : {\n          \"personAddressLine1\" : \"CurrentAddressLine1\",\n          \"personAddressLine2\" : \"CurrentAddressLine2\",\n          \"personAddressLine3\" : \"CurrentAddressLine3\",\n          \"personAddressLine4\" : \"CurrentAddressLine4\",\n          \"personAddressPostCode\" : \"ne00qw\"\n        },\n        \"timeAtAddress\" : {\n          \"timeAtAddress\" : \"01\"\n        }\n      },\n      \"additionalAddress\" : {\n        \"personAddress\" : {\n          \"personAddressLine1\" : \"addressUnderThreeYearsLine1\",\n          \"personAddressLine2\" : \"addressUnderThreeYearsLine2\",\n          \"personAddressLine3\" : \"addressUnderThreeYearsLine3\",\n          \"personAddressLine4\" : \"addressUnderThreeYearsLine4\",\n          \"personAddressPostCode\" : \"ne00qw\"\n        },\n        \"timeAtAddress\" : {\n          \"timeAtAddress\" : \"01\"\n        }\n      },\n      \"additionalExtraAddress\" : {\n        \"personAddress\" : {\n          \"personAddressLine1\" : \"AddressUnderOneYearAddressLine1\",\n          \"personAddressLine2\" : \"AddressUnderOneYearAddressLine2\",\n          \"personAddressLine3\" : \"AddressUnderOneYearAddressLine3\",\n          \"personAddressLine4\" : \"AddressUnderOneYearAddressLine4\",\n          \"personAddressPostCode\" : \"ne00qw\"\n        },\n        \"timeAtAddress\" : {\n          \"timeAtAddress\" : \"01\"\n        }\n      }\n    },\n    \"positions\" : {\n      \"positions\" : [ \"04\", \"06\" ],\n      \"startDate\" : \"2010-01-03\"\n    },\n    \"saRegistered\" : {\n      \"saRegistered\" : true,\n      \"utrNumber\" : \"1234567890\"\n    },\n    \"vatRegistered\" : {\n      \"registeredForVAT\" : true,\n      \"vrnNumber\" : \"123456789\"\n    },\n    \"experienceTraining\" : {\n      \"experienceTraining\" : true,\n      \"experienceInformation\" : \"DescOfPrevExperience\"\n    },\n    \"training\" : {\n      \"training\" : true,\n      \"information\" : \"TrainingDetails\"\n    },\n    \"hasAlreadyPassedFitAndProper\" : true,\n    \"hasChanged\" : false,\n    \"hasAccepted\" : true,\n    \"lineId\" : 666666\n  }, {\n    \"personName\" : {\n      \"firstName\" : \"bbbbbbbbbbbb\",\n      \"middleName\" : \"bbbbbbbbbbb\",\n      \"lastName\" : \"bbbbbbbbbbb\"\n    },\n    \"legalName\" : {\n      \"hasPreviousName\" : true,\n      \"firstName\" : \"bbbbbbbbbbbb\",\n      \"middleName\" : \"bbbbbbbbbbbb\",\n      \"lastName\" : \"bbbbbbbbbbbb\"\n    },\n    \"legalNameChangeDate\" : \"1967-08-13\",\n    \"knownBy\" : {\n      \"hasOtherNames\" : true,\n      \"otherNames\" : \"bbbbbbbbbbb\"\n    },\n    \"personResidenceType\" : {\n      \"nino\" : \"BB000000A\",\n      \"countryOfBirth\" : \"GB\",\n      \"nationality\" : \"GB\"\n    },\n    \"contactDetails\" : {\n      \"phoneNumber\" : \"098765\",\n      \"emailAddress\" : \"b@bodod.com\"\n    },\n    \"addressHistory\" : {\n      \"currentAddress\" : {\n        \"personAddress\" : {\n          \"personAddressLine1\" : \"b\",\n          \"personAddressLine2\" : \"b\",\n          \"personAddressLine3\" : \"b\",\n          \"personAddressLine4\" : \"b\",\n          \"personAddressPostCode\" : \"ne00qw\"\n        },\n        \"timeAtAddress\" : {\n          \"timeAtAddress\" : \"01\"\n        }\n      },\n      \"additionalAddress\" : {\n        \"personAddress\" : {\n          \"personAddressLine1\" : \"b\",\n          \"personAddressLine2\" : \"b\",\n          \"personAddressLine3\" : \"b\",\n          \"personAddressLine4\" : \"b\",\n          \"personAddressPostCode\" : \"ne00qw\"\n        },\n        \"timeAtAddress\" : {\n          \"timeAtAddress\" : \"01\"\n        }\n      },\n      \"additionalExtraAddress\" : {\n        \"personAddress\" : {\n          \"personAddressLine1\" : \"a\",\n          \"personAddressLine2\" : \"a\",\n          \"personAddressLine3\" : \"a\",\n          \"personAddressLine4\" : \"a\",\n          \"personAddressPostCode\" : \"ne00qw\"\n        },\n        \"timeAtAddress\" : {\n          \"timeAtAddress\" : \"01\"\n        }\n      }\n    },\n    \"positions\" : {\n      \"positions\" : [ \"04\", \"06\" ],\n      \"startDate\" : \"2010-01-01\"\n    },\n    \"saRegistered\" : {\n      \"saRegistered\" : true,\n      \"utrNumber\" : \"1111111111\"\n    },\n    \"vatRegistered\" : {\n      \"registeredForVAT\" : true,\n      \"vrnNumber\" : \"111111111\"\n    },\n    \"experienceTraining\" : {\n      \"experienceTraining\" : true,\n      \"experienceInformation\" : \"bbbbbbbbbb\"\n    },\n    \"training\" : {\n      \"training\" : true,\n      \"information\" : \"bbbbbbbbbbb\"\n    },\n    \"hasAlreadyPassedFitAndProper\" : true,\n    \"hasChanged\" : false,\n    \"hasAccepted\" : true,\n    \"lineId\" : 777777\n  } ]\n}"
        val model = Json.parse(JsonBody).as[UpdateSave4LaterResponse]
        import utils.Strings._
        println("@@@@@@@@@@@@@@@@@@@@@@@@@@@@" in Console.YELLOW_B)
        println(model)
        println("@@@@@@@@@@@@@@@@@@@@@@@@@@@@" in Console.YELLOW_B)

        AmlsShortLivedCache.remove(user.user.oid).map { x =>
          Ok("Cache successfully updated")
        }
  }


  def duplicateEnrolment = Authorised.async {
    implicit user => implicit request =>
      Future.successful(Ok(views.html.submission.duplicate_enrolment()))
  }

  def duplicateSubmission = Authorised.async {
    implicit authContext => implicit request =>
      Future.successful(Ok(status_submitted("XML498749237483", Some("An example business"), None, true)))
  }

  def wrongCredentials = Authorised.async {
    implicit authContext => implicit request =>
      Future.successful(Ok(views.html.submission.wrong_credential_type()))
  }

  def getPayment(ref: String) = Authorised.async {
    implicit authContext => implicit request =>
      AmlsConnector.getPaymentByPaymentReference(ref) map {
        case Some(p) => Ok(Json.toJson(p))
        case _ => Ok(s"The payment for $ref was not found")
      }
  }

  def companyName = Authorised.async {
    implicit authContext => implicit request =>
      AmlsConnector.registrationDetails("XJ0000100093742") map { details =>
        Ok(details.companyName)
      } recover {
        case _ => Ok("Failed to fetch registration details")
      }
  }

  def paymentFailure = Authorised.async {
    implicit authContext => implicit request =>
      Future.successful(Ok(views.html.confirmation.payment_failure("confirmation.payment.failed.reason.failure", 100, "X123456789")))
  }

  def paymentSuccessful = Authorised.async {
    implicit authContext => implicit request =>
      Future.successful(Ok(views.html.confirmation.payment_confirmation("Company Name", "X123456789")))
  }

  def paymentSuccessfulTransitionalRenewal = Authorised.async {
    implicit authContext => implicit request =>
      Future.successful(Ok(views.html.confirmation.payment_confirmation_transitional_renewal("Company Name", "X123456789")))
  }

  def confirmationBacs = Authorised.async {
    implicit authContext => implicit request =>
      Future.successful(Ok(views.html.confirmation.confirmation_bacs("Company Name")))
  }

  def confirmationBacsTransitionalRenewal = Authorised.async {
    implicit authContext => implicit request =>
      Future.successful(Ok(views.html.confirmation.confirmation_bacs_transitional_renewal("Company Name")))
  }

}
